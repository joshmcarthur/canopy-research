{% extends "canopyresearch/base.html" %}

{% block title %}Workspaces - Canopy Research{% endblock %}

{% block content %}
<div class="canopy-center">
    <h2 class="canopy-prompt">What can I help you with?</h2>
    <form method="post" action="{% url 'workspace_create' %}" style="width: 100%; max-width: 560px;">
        {% include "canopyresearch/partials/workspace_form_fields.html" %}
        <sl-button type="submit" variant="primary" size="large" style="margin-top: 1.25rem;">
            Create workspace
        </sl-button>
    </form>
</div>

<sl-grid columns="repeat(auto-fill, minmax(300px, 1fr))" gap="20px">
    {% for workspace in workspaces %}
    <sl-card>
        <div slot="header">
            <strong>{{ workspace.name }}</strong>
        </div>
        <p>{{ workspace.description|default:"No description" }}</p>
        <div slot="footer">
            <sl-badge variant="neutral">{{ workspace.sources.count }} sources</sl-badge>
            <sl-badge variant="neutral">{{ workspace.documents.count }} documents</sl-badge>
            <br>
            <a href="{% url 'workspace_detail' workspace.id %}">
                <sl-button variant="primary" size="small">View</sl-button>
            </a>
        </div>
    </sl-card>
    {% empty %}
    <sl-card>
        <p>No workspaces yet. <a href="{% url 'workspace_create' %}">Create one</a></p>
    </sl-card>
    {% endfor %}
</sl-grid>

<sl-button variant="primary" href="{% url 'workspace_create' %}">Create New Workspace</sl-button>
{% endblock %}
